# 07. AI連携（概要生成）

**Status**: TODO
**Priority**: 高
**Depends on**: 06-quest-registration

## 概要

Gemini 2.5を使用した本の概要生成と確認機能。

## 関連する要件

- 4.2.1 入力フロー（REQUIREMENTS.md）
- 技術スタック: Gemini 2.5（テキスト生成 + 画像/PDF読み取り）

## Tasks

### AI概要生成
- [ ] Gemini API クライアント設定
- [ ] タイトルからの概要生成プロンプト作成
- [ ] PDF/画像からの内容読み取りプロンプト作成
- [ ] 概要生成処理の実装

### 確認画面
- [ ] 概要表示UI作成
- [ ] 「この内容で合っていますか？」確認ダイアログ
- [ ] 「合っている」→ 世界観選択へ
- [ ] 「違う」→ 追加アップロード促進
- [ ] 概要の編集機能（任意）

### API
- [ ] POST /api/books/[id]/verify（AI概要確認）

## プロンプト設計

```
【タイトルからの概要生成】
以下の本のタイトルから、本の概要を推測してください。
- 本のジャンル
- 主要なテーマ
- 想定される内容（3-5個の要点）

【PDF/画像からの読み取り】
アップロードされた目次/ページから、本の内容を要約してください。
```

## ファイル構成

```
src/
├── app/
│   └── (protected)/
│       └── quest/
│           └── confirm/
│               └── [bookId]/
│                   └── page.tsx
└── lib/
    └── gemini/
        ├── client.ts
        └── prompts.ts
```

## 完了条件

- タイトルから概要が生成される
- PDF/画像から内容が読み取られる
- ユーザーが概要を確認できる
